<h2>Advanced Registration Form (Template-Driven)</h2>

<form #userForm="ngForm" (ngSubmit)="onSubmit()" novalidate>

    <label for="name">Name:</label>
    <input type="text" id="name" name="name" [(ngModel)]="user.name" required minlength="3" maxlength="30"
        #name="ngModel" />
    <div *ngIf="name.invalid && name.touched" class="error">
        <small *ngIf="name.errors?.['required']">Name is required.</small>
        <small *ngIf="name.errors?.['minlength']">Name must be at least 3 characters.</small>
        <small *ngIf="name.errors?.['maxlength']">Name cannot exceed 30 characters.</small>
    </div>

    <br />


    <label for="email">Email:</label>
    <input type="email" id="email" name="email" [(ngModel)]="user.email" required email #email="ngModel" />
    <div *ngIf="email.invalid && email.touched" class="error">
        <small *ngIf="email.errors?.['required']">Email is required.</small>
        <small *ngIf="email.errors?.['email']">Invalid email format.</small>
    </div>

    <br />

    <label for="password">Password:</label>
    <input type="password" id="password" name="password" [(ngModel)]="user.password" required minlength="6"
        #password="ngModel" />
    <div *ngIf="password.invalid && password.touched" class="error">
        <small *ngIf="password.errors?.['required']">Password is required.</small>
        <small *ngIf="password.errors?.['minlength']">Password must be at least 6 characters.</small>
    </div>

    <br />

    <label for="confirmPassword">Confirm Password:</label>
    <input type="password" id="confirmPassword" name="confirmPassword" [(ngModel)]="user.confirmPassword" required
        #confirmPassword="ngModel" [class.invalid]=" confirmPassword.touched && !passwordsMatch() " />
    <div *ngIf="confirmPassword.touched && !passwordsMatch()" class="error">
        <small>Passwords do not match.</small>
    </div>

    <br />

    <label for="age">Age:</label>
    <input type="number" id="age" name="age" [(ngModel)]="user.age" required min="18" max="65" #age="ngModel" />
    <div *ngIf="age.invalid && age.touched" class="error">
        <small *ngIf="age.errors?.['required']">Age is required.</small>
        <small *ngIf="age.errors?.['min']">Must be at least 18 years old.</small>
        <small *ngIf="age.errors?.['max']">Age cannot exceed 65 years.</small>
    </div>

    <br />

    <button type="submit" [disabled]="userForm.invalid || !passwordsMatch()">
        Register
    </button>

</form>